{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from \"axios\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nif (process.env.NODE_ENV == \"development\") {\n  if (Platform.OS === \"ios\") {\n    axios.defaults.baseURL = \"http://127.0.0.1:8000\";\n  } else {\n    axios.defaults.baseURL = \"http://10.0.2.2:8000\";\n  }\n} else {\n  axios.defaults.baseURL = \"https://www.direct2logbook.com\";\n}\n\naxios.defaults.headers.get[\"Accept\"] = \"application/json\";\naxios.defaults.headers.post[\"Accept\"] = \"application/json\";\nvar api = axios.create();\napi.interceptors.request.use(function _callee(config) {\n  var token;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"token\"));\n\n        case 2:\n          token = _context.sent;\n\n          if (token) {\n            config.headers.Authorization = \"Token \" + token;\n          }\n\n          return _context.abrupt(\"return\", config);\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}, function (error) {\n  console.log(\"error\", error);\n  return Promise.reject(error);\n});\nexport default api;","map":{"version":3,"sources":["/Users/blake/react_native/d2lb/app/api/axiosConfig.js"],"names":["axios","AsyncStorage","process","env","NODE_ENV","Platform","OS","defaults","baseURL","headers","get","post","api","create","interceptors","request","use","config","getItem","token","Authorization","error","console","log","Promise","reject"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,OAAOC,YAAP,MAAyB,2CAAzB;;AAEA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,aAA5B,EAA2C;AACzC,MAAIC,QAAQ,CAACC,EAAT,KAAgB,KAApB,EAA2B;AACzBN,IAAAA,KAAK,CAACO,QAAN,CAAeC,OAAf,GAAyB,uBAAzB;AAED,GAHD,MAGO;AACLR,IAAAA,KAAK,CAACO,QAAN,CAAeC,OAAf,GAAyB,sBAAzB;AACD;AACF,CAPD,MAOO;AACLR,EAAAA,KAAK,CAACO,QAAN,CAAeC,OAAf,GAAyB,gCAAzB;AACD;;AAEDR,KAAK,CAACO,QAAN,CAAeE,OAAf,CAAuBC,GAAvB,CAA2B,QAA3B,IAAuC,kBAAvC;AACAV,KAAK,CAACO,QAAN,CAAeE,OAAf,CAAuBE,IAAvB,CAA4B,QAA5B,IAAwC,kBAAxC;AAEA,IAAMC,GAAG,GAAGZ,KAAK,CAACa,MAAN,EAAZ;AAEAD,GAAG,CAACE,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CACE,iBAAOC,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACsBhB,YAAY,CAACiB,OAAb,CAAqB,OAArB,CADtB;;AAAA;AACQC,UAAAA,KADR;;AAEE,cAAIA,KAAJ,EAAW;AACTF,YAAAA,MAAM,CAACR,OAAP,CAAeW,aAAf,GAA+B,WAAWD,KAA1C;AACD;;AAJH,2CAKSF,MALT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CADF,EAQE,UAACI,KAAD,EAAW;AACTC,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,KAArB;AACA,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAXH;AAcA,eAAeT,GAAf","sourcesContent":["import axios from \"axios\";\nimport { Platform } from \"react-native\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nif (process.env.NODE_ENV == \"development\") {\n  if (Platform.OS === \"ios\") {\n    axios.defaults.baseURL = \"http://127.0.0.1:8000\";\n    // axios.defaults.baseURL = \"https://www.direct2logbook.com\";\n  } else {\n    axios.defaults.baseURL = \"http://10.0.2.2:8000\";\n  }\n} else {\n  axios.defaults.baseURL = \"https://www.direct2logbook.com\";\n}\n\naxios.defaults.headers.get[\"Accept\"] = \"application/json\";\naxios.defaults.headers.post[\"Accept\"] = \"application/json\";\n\nconst api = axios.create();\n\napi.interceptors.request.use(\n  async (config) => {\n    const token = await AsyncStorage.getItem(\"token\");\n    if (token) {\n      config.headers.Authorization = \"Token \" + token;\n    }\n    return config;\n  },\n  (error) => {\n    console.log(\"error\", error);\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import React, { useRef, useEffect, useContext } from \"react\";\nimport MapView, { Marker, Polyline } from \"react-native-maps\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { STYLES } from \"../styles/styles\";\nimport ActivityModal from \"../components/ActivityModal\";\nimport api from \"../api/axiosConfig\";\nimport AppContext from \"../components/AppContext\";\nimport { MaterialCommunityIcons } from \"@expo/vector-icons\";\nimport AppText from \"../components/AppText\";\nimport Separator from \"../components/Separator\";\n\nfunction FlightDetailScreen(_ref) {\n  var route = _ref.route,\n      navigation = _ref.navigation;\n  var markers = route.params.item.app_markers;\n  var polylines = route.params.item.app_polylines.coordinates;\n  var mapRef = useRef(null);\n  var Context = useContext(AppContext);\n  console.log(polylines);\n  var approaches = route.params.item.approaches;\n\n  var deleteItem = function deleteItem(primary_key) {\n    var url = \"/api/flights/\" + primary_key + \"/\";\n    api.delete(url).then(function () {\n      navigation.goBack();\n      Context.setActivityVisible(false);\n    }).catch(function (error) {\n      Context.setActivityVisible(false);\n      Alert.alert(\"Something went wrong, please try again\");\n    });\n  };\n\n  var showAlert = function showAlert(primary_key, date, route) {\n    return Alert.alert(\"Are you sure?\", \"This can't be undone\", [{\n      text: Platform.OS === \"ios\" ? \"Yes\" : \"\",\n      onPress: function onPress() {\n        deleteItem(primary_key, date, route);\n        Context.setActivityVisible(true);\n      }\n    }, {\n      text: \"Cancel\",\n      style: \"cancel\"\n    }, {\n      cancelable: false\n    }]);\n  };\n\n  useEffect(function () {\n    mapRef.current.fitToCoordinates(polylines);\n  }, []);\n  return React.createElement(View, {\n    style: styles.container\n  }, React.createElement(View, {\n    style: styles.detailsPanel\n  }, React.createElement(View, {\n    style: styles.rowContainer\n  }, React.createElement(View, {\n    style: styles.firstColumn\n  }, React.createElement(AppText, {\n    size: 16,\n    color: STYLES.blue,\n    weight: \"bold\"\n  }, route.params.item.date)), React.createElement(View, {\n    style: styles.secondColumn\n  }, React.createElement(View, {\n    style: {\n      flex: 1,\n      flexDirection: \"row\"\n    }\n  }, React.createElement(AppText, {\n    size: 16,\n    color: STYLES.blue,\n    weight: \"bold\"\n  }, route.params.item.aircraft_type), React.createElement(AppText, null, \"  \"), React.createElement(AppText, {\n    size: 16,\n    color: STYLES.blue,\n    weight: \"bold\"\n  }, route.params.item.registration))), React.createElement(View, {\n    style: styles.thirdColumn\n  }, React.createElement(AppText, {\n    size: 16,\n    color: STYLES.blue,\n    weight: \"bold\"\n  }, route.params.item.duration))), React.createElement(Separator, null), React.createElement(View, {\n    style: styles.rowContainer\n  }, React.createElement(View, {\n    style: styles.firstColumn\n  }, React.createElement(AppText, {\n    size: 16,\n    color: STYLES.black\n  }, route.params.item.route)), React.createElement(View, {\n    style: styles.thirdColumn\n  }, React.createElement(AppText, {\n    size: 16,\n    color: STYLES.black\n  }, route.params.item.pilot_in_command ? \"PIC\" : \"\", route.params.item.second_in_command ? \"SIC\" : \"\", route.params.item.solo ? \"Solo\" : \"\", route.params.item.dual ? \"Dual\" : \"\"))), React.createElement(View, {\n    style: styles.rowContainer\n  }, React.createElement(View, {\n    style: styles.firstColumn\n  }, React.createElement(View, {\n    style: styles.rowContainer\n  }, React.createElement(AppText, {\n    size: 16,\n    color: STYLES.black\n  }, \"Landings:\"), route.params.item.landings_day ? React.createElement(AppText, {\n    size: 16,\n    color: STYLES.black\n  }, \" \", \"Day \", route.params.item.landings_day) : null, route.params.item.landings_night ? React.createElement(AppText, {\n    size: 16,\n    color: STYLES.black\n  }, \" \", \"Night \", route.params.item.landings_night) : null)), React.createElement(View, {\n    style: styles.secondColumn\n  }), React.createElement(View, {\n    style: styles.thirdColumn\n  }, React.createElement(AppText, {\n    size: 16,\n    color: STYLES.black\n  }, route.params.item.instructor ? \"  CFI\" : \"\"))), React.createElement(View, {\n    style: styles.rowContainer\n  }, React.createElement(View, {\n    style: styles.firstColumn\n  }, React.createElement(View, {\n    style: styles.rowContainer\n  }, route.params.item.night ? React.createElement(AppText, {\n    size: 16,\n    color: STYLES.black\n  }, \"Night \", route.params.item.night, \"  \") : null, route.params.item.instrument ? React.createElement(AppText, {\n    size: 16,\n    color: STYLES.black\n  }, \"Inst \", route.params.item.instrument, \"  \") : null, route.params.item.simulated_instrument ? React.createElement(AppText, {\n    size: 16,\n    color: STYLES.black\n  }, \"Hood \", route.params.item.simulated_instrument, \"  \") : null)), React.createElement(View, {\n    style: styles.thirdColumn\n  }, React.createElement(AppText, {\n    size: 16,\n    color: STYLES.black\n  }, route.params.item.cross_country ? \"XC\" : \"\", route.params.item.simulator ? \"  Sim\" : \"\"))), React.createElement(View, {\n    style: styles.rowContainer\n  }, React.createElement(View, {\n    style: styles.firstColumn\n  }, React.createElement(View, {\n    style: styles.rowContainer\n  }, approaches.map(function (appr, index) {\n    return React.createElement(AppText, {\n      size: 16,\n      color: STYLES.black,\n      key: index\n    }, appr.approach_type, \"-\", appr.number, \" \");\n  }))), React.createElement(View, {\n    style: styles.thirdColumn\n  }, route.params.item.hold ? React.createElement(AppText, {\n    size: 16\n  }, \"Hold\") : null)), React.createElement(View, {\n    style: styles.rowContainer\n  }, React.createElement(View, {\n    style: styles.firstColumn\n  }, React.createElement(AppText, null, route.params.item.remarks))), React.createElement(Separator, null), React.createElement(View, {\n    style: {\n      flexDirection: \"row\",\n      marginBottom: 5\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: {\n      flex: 2,\n      backgroundColor: STYLES.danger,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    onPress: function onPress() {\n      showAlert(route.params.item.id, route.params.item.date, route.params.item.route);\n    }\n  }, React.createElement(View, null, React.createElement(MaterialCommunityIcons, {\n    name: \"delete\",\n    size: 30,\n    color: STYLES.white\n  }))), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      navigation.navigate(\"FlightUpdate\", {\n        item: route.params.item\n      });\n    },\n    style: {\n      flex: 2,\n      backgroundColor: STYLES.blue,\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    }\n  }, React.createElement(View, null, React.createElement(MaterialCommunityIcons, {\n    name: \"update\",\n    size: 30,\n    color: STYLES.white,\n    style: {\n      padding: 5\n    }\n  }))))), React.createElement(View, {\n    style: styles.mapView\n  }, React.createElement(MapView, {\n    style: {\n      width: \"100%\",\n      height: \"100%\"\n    },\n    mapPadding: {\n      left: 50,\n      right: 50,\n      bottom: 400\n    },\n    ref: mapRef\n  }, markers.map(function (marker) {\n    return React.createElement(Marker, {\n      key: marker.key,\n      coordinate: marker.coordinates,\n      title: marker.title\n    });\n  }), React.createElement(Polyline, {\n    coordinates: polylines\n  }))), React.createElement(ActivityModal, {\n    visible: Context.activityVisibleValue\n  }));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\"\n  },\n  detailsPanel: {\n    flexDirection: \"column\",\n    width: \"100%\",\n    margin: 0,\n    backgroundColor: STYLES.white,\n    borderRadius: STYLES.borderRadius,\n    padding: STYLES.borderRadius,\n    backgroundColor: STYLES.white,\n    borderRadius: STYLES.borderRadius\n  },\n  mapView: {},\n  rowContainer: {\n    flexDirection: \"row\",\n    paddingBottom: 5\n  },\n  firstColumn: {\n    flex: 1.1,\n    flexDirection: \"column\"\n  },\n  secondColumn: {\n    flex: 2,\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  thirdColumn: {\n    flex: 1,\n    flexDirection: \"column\",\n    alignItems: \"flex-end\"\n  },\n  text: {\n    fontFamily: STYLES.font,\n    color: STYLES.blue\n  }\n});\nexport default FlightDetailScreen;","map":{"version":3,"sources":["/Users/blake/react_native/d2lb/app/screens/FlightDetailScreen.js"],"names":["React","useRef","useEffect","useContext","MapView","Marker","Polyline","STYLES","ActivityModal","api","AppContext","MaterialCommunityIcons","AppText","Separator","FlightDetailScreen","route","navigation","markers","params","item","app_markers","polylines","app_polylines","coordinates","mapRef","Context","console","log","approaches","deleteItem","primary_key","url","delete","then","goBack","setActivityVisible","catch","error","Alert","alert","showAlert","date","text","Platform","OS","onPress","style","cancelable","current","fitToCoordinates","styles","container","detailsPanel","rowContainer","firstColumn","blue","secondColumn","flex","flexDirection","aircraft_type","registration","thirdColumn","duration","black","pilot_in_command","second_in_command","solo","dual","landings_day","landings_night","instructor","night","instrument","simulated_instrument","cross_country","simulator","map","appr","index","approach_type","number","hold","remarks","marginBottom","backgroundColor","danger","alignItems","justifyContent","id","white","navigate","padding","mapView","width","height","left","right","bottom","marker","key","title","activityVisibleValue","StyleSheet","create","margin","borderRadius","paddingBottom","fontFamily","font","color"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useContext } from \"react\";\nimport MapView, { Marker, Polyline } from \"react-native-maps\";\nimport {\n  StyleSheet,\n  View,\n  Dimensions,\n  Alert,\n  TouchableOpacity,\n  Text,\n  Platform,\n} from \"react-native\";\n\nimport { STYLES } from \"../styles/styles\";\nimport ActivityModal from \"../components/ActivityModal\";\nimport api from \"../api/axiosConfig\";\nimport AppContext from \"../components/AppContext\";\nimport { MaterialCommunityIcons } from \"@expo/vector-icons\";\nimport AppText from \"../components/AppText\";\nimport Separator from \"../components/Separator\";\n\nfunction FlightDetailScreen({ route, navigation }) {\n  const markers = route.params.item.app_markers;\n  const polylines = route.params.item.app_polylines.coordinates;\n  const mapRef = useRef(null);\n  const Context = useContext(AppContext);\n\n  console.log(polylines);\n\n  const approaches = route.params.item.approaches;\n\n  const deleteItem = (primary_key) => {\n    const url = \"/api/flights/\" + primary_key + \"/\";\n    api\n      .delete(url)\n      .then(() => {\n        navigation.goBack();\n        Context.setActivityVisible(false);\n      })\n      .catch((error) => {\n        Context.setActivityVisible(false);\n        Alert.alert(\"Something went wrong, please try again\");\n      });\n  };\n\n  const showAlert = (primary_key, date, route) =>\n    Alert.alert(\"Are you sure?\", \"This can't be undone\", [\n      {\n        text: Platform.OS === \"ios\" ? \"Yes\" : \"\",\n        onPress: () => {\n          deleteItem(primary_key, date, route);\n          Context.setActivityVisible(true);\n        },\n      },\n      {\n        text: \"Cancel\",\n        style: \"cancel\",\n      },\n      {\n        cancelable: false,\n      },\n    ]);\n\n  useEffect(() => {\n    mapRef.current.fitToCoordinates(polylines);\n  }, []);\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.detailsPanel}>\n        {/* first row */}\n\n        <View style={styles.rowContainer}>\n          <View style={styles.firstColumn}>\n            <AppText size={16} color={STYLES.blue} weight='bold'>\n              {route.params.item.date}\n            </AppText>\n          </View>\n          <View style={styles.secondColumn}>\n            <View style={{ flex: 1, flexDirection: \"row\" }}>\n              <AppText size={16} color={STYLES.blue} weight='bold'>\n                {route.params.item.aircraft_type}\n              </AppText>\n              <AppText>{\"  \"}</AppText>\n              <AppText size={16} color={STYLES.blue} weight='bold'>\n                {route.params.item.registration}\n              </AppText>\n            </View>\n          </View>\n          <View style={styles.thirdColumn}>\n            <AppText size={16} color={STYLES.blue} weight='bold'>\n              {route.params.item.duration}\n            </AppText>\n          </View>\n        </View>\n        {/* second row */}\n        <Separator />\n        <View style={styles.rowContainer}>\n          <View style={styles.firstColumn}>\n            <AppText size={16} color={STYLES.black}>\n              {route.params.item.route}\n            </AppText>\n          </View>\n          <View style={styles.thirdColumn}>\n            <AppText size={16} color={STYLES.black}>\n              {route.params.item.pilot_in_command ? \"PIC\" : \"\"}\n              {route.params.item.second_in_command ? \"SIC\" : \"\"}\n              {route.params.item.solo ? \"Solo\" : \"\"}\n              {route.params.item.dual ? \"Dual\" : \"\"}\n            </AppText>\n          </View>\n        </View>\n        {/* third row */}\n        <View style={styles.rowContainer}>\n          <View style={styles.firstColumn}>\n            <View style={styles.rowContainer}>\n              <AppText size={16} color={STYLES.black}>\n                Landings:\n              </AppText>\n              {route.params.item.landings_day ? (\n                <AppText size={16} color={STYLES.black}>\n                  {\" \"}\n                  Day {route.params.item.landings_day}\n                </AppText>\n              ) : null}\n              {route.params.item.landings_night ? (\n                <AppText size={16} color={STYLES.black}>\n                  {\" \"}\n                  Night {route.params.item.landings_night}\n                </AppText>\n              ) : null}\n            </View>\n          </View>\n          <View style={styles.secondColumn}></View>\n          <View style={styles.thirdColumn}>\n            <AppText size={16} color={STYLES.black}>\n              {route.params.item.instructor ? \"  CFI\" : \"\"}\n            </AppText>\n          </View>\n        </View>\n\n        {/* fourth row */}\n        <View style={styles.rowContainer}>\n          <View style={styles.firstColumn}>\n            <View style={styles.rowContainer}>\n              {route.params.item.night ? (\n                <AppText size={16} color={STYLES.black}>\n                  Night {route.params.item.night}\n                  {\"  \"}\n                </AppText>\n              ) : null}\n              {route.params.item.instrument ? (\n                <AppText size={16} color={STYLES.black}>\n                  Inst {route.params.item.instrument}\n                  {\"  \"}\n                </AppText>\n              ) : null}\n              {route.params.item.simulated_instrument ? (\n                <AppText size={16} color={STYLES.black}>\n                  Hood {route.params.item.simulated_instrument}\n                  {\"  \"}\n                </AppText>\n              ) : null}\n            </View>\n          </View>\n          <View style={styles.thirdColumn}>\n            <AppText size={16} color={STYLES.black}>\n              {route.params.item.cross_country ? \"XC\" : \"\"}\n              {route.params.item.simulator ? \"  Sim\" : \"\"}\n            </AppText>\n          </View>\n        </View>\n        <View style={styles.rowContainer}>\n          <View style={styles.firstColumn}>\n            <View style={styles.rowContainer}>\n              {approaches.map((appr, index) => (\n                <AppText size={16} color={STYLES.black} key={index}>\n                  {appr.approach_type}-{appr.number}{\" \"}\n                </AppText>\n              ))}\n            </View>\n          </View>\n          <View style={styles.thirdColumn}>\n            {route.params.item.hold ? <AppText size={16}>Hold</AppText> : null}\n          </View>\n        </View>\n\n        {/* fifth row */}\n        <View style={styles.rowContainer}>\n          <View style={styles.firstColumn}>\n            <AppText>{route.params.item.remarks}</AppText>\n          </View>\n        </View>\n        {/* sixth row */}\n        <Separator />\n        <View style={{ flexDirection: \"row\", marginBottom: 5 }}>\n          <TouchableOpacity\n            style={{\n              flex: 2,\n              backgroundColor: STYLES.danger,\n              alignItems: \"center\",\n              justifyContent: \"center\",\n            }}\n            onPress={() => {\n              showAlert(\n                route.params.item.id,\n                route.params.item.date,\n                route.params.item.route\n              );\n            }}\n          >\n            <View>\n              <MaterialCommunityIcons\n                name={\"delete\"}\n                size={30}\n                color={STYLES.white}\n              />\n            </View>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n            onPress={() => {\n              navigation.navigate(\"FlightUpdate\", {\n                item: route.params.item,\n              });\n            }}\n            style={{\n              flex: 2,\n              backgroundColor: STYLES.blue,\n              alignItems: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <View>\n              <MaterialCommunityIcons\n                name={\"update\"}\n                size={30}\n                color={STYLES.white}\n                style={{ padding: 5 }}\n              />\n            </View>\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      <View style={styles.mapView}>\n        <MapView\n          style={{ width: \"100%\", height: \"100%\" }}\n          mapPadding={{\n            left: 50,\n            right: 50,\n            bottom: 400,\n          }}\n          ref={mapRef}\n        >\n          {markers.map((marker) => (\n            <Marker\n              key={marker.key}\n              coordinate={marker.coordinates}\n              title={marker.title}\n            />\n          ))}\n          <Polyline coordinates={polylines}></Polyline>\n        </MapView>\n      </View>\n\n      <ActivityModal visible={Context.activityVisibleValue}></ActivityModal>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n  },\n  detailsPanel: {\n    flexDirection: \"column\",\n    width: \"100%\",\n    margin: 0,\n    backgroundColor: STYLES.white,\n    borderRadius: STYLES.borderRadius,\n    padding: STYLES.borderRadius,\n    backgroundColor: STYLES.white,\n    borderRadius: STYLES.borderRadius,\n  },\n  mapView: {},\n  rowContainer: {\n    flexDirection: \"row\",\n    paddingBottom: 5,\n  },\n  firstColumn: {\n    flex: 1.1,\n    flexDirection: \"column\",\n  },\n  secondColumn: {\n    flex: 2,\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  thirdColumn: {\n    flex: 1,\n    flexDirection: \"column\",\n    alignItems: \"flex-end\",\n  },\n\n  text: {\n    fontFamily: STYLES.font,\n    color: STYLES.blue,\n  },\n});\n\nexport default FlightDetailScreen;\n"]},"metadata":{},"sourceType":"module"}
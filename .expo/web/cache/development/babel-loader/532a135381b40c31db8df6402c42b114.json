{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from \"axios\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\naxios.defaults.baseURL = \"http://127.0.0.1:8000\";\naxios.defaults.headers.get[\"Accept\"] = \"application/json\";\naxios.defaults.headers.post[\"Accept\"] = \"application/json\";\nvar api = axios.create();\napi.interceptors.request.use(function _callee(config) {\n  var token;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"token\"));\n\n        case 2:\n          token = _context.sent;\n\n          if (token) {\n            config.headers.Authorization = \"Token \" + token;\n          }\n\n          return _context.abrupt(\"return\", config);\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}, function (error) {\n  return Promise.reject(error);\n});\nexport default api;","map":{"version":3,"sources":["/Users/blake/react_native/d2lb/app/api/axiosConfig.js"],"names":["axios","AsyncStorage","defaults","baseURL","headers","get","post","api","create","interceptors","request","use","config","getItem","token","Authorization","error","Promise","reject"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAOC,YAAP,MAAyB,2CAAzB;AAEAD,KAAK,CAACE,QAAN,CAAeC,OAAf,GAAyB,uBAAzB;AAEAH,KAAK,CAACE,QAAN,CAAeE,OAAf,CAAuBC,GAAvB,CAA2B,QAA3B,IAAuC,kBAAvC;AACAL,KAAK,CAACE,QAAN,CAAeE,OAAf,CAAuBE,IAAvB,CAA4B,QAA5B,IAAwC,kBAAxC;AAEA,IAAMC,GAAG,GAAGP,KAAK,CAACQ,MAAN,EAAZ;AACAD,GAAG,CAACE,YAAJ,CAAiBC,OAAjB,CAAyBC,GAAzB,CACE,iBAAOC,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACsBX,YAAY,CAACY,OAAb,CAAqB,OAArB,CADtB;;AAAA;AACQC,UAAAA,KADR;;AAGE,cAAIA,KAAJ,EAAW;AACTF,YAAAA,MAAM,CAACR,OAAP,CAAeW,aAAf,GAA+B,WAAWD,KAA1C;AACD;;AALH,2CAMSF,MANT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CADF,EASE,UAACI,KAAD,EAAW;AACT,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAXH;AAcA,eAAeT,GAAf","sourcesContent":["import axios from \"axios\";\n\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\naxios.defaults.baseURL = \"http://127.0.0.1:8000\";\n\naxios.defaults.headers.get[\"Accept\"] = \"application/json\";\naxios.defaults.headers.post[\"Accept\"] = \"application/json\";\n\nconst api = axios.create();\napi.interceptors.request.use(\n  async (config) => {\n    const token = await AsyncStorage.getItem(\"token\");\n    // console.log(token);\n    if (token) {\n      config.headers.Authorization = \"Token \" + token;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\n"]},"metadata":{},"sourceType":"module"}